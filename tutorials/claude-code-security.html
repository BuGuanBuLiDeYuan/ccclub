<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Claude Code å®‰å…¨æœ€ä½³å®è·µ - Claude Code Club</title>
    <meta name="description" content="æŒæ¡Claude Codeå¼€å‘ä¸­çš„å®‰å…¨æœ€ä½³å®è·µï¼ŒåŒ…æ‹¬ä»£ç å®‰å…¨ã€æ•°æ®ä¿æŠ¤ã€æƒé™ç®¡ç†ç­‰">
    <link rel="stylesheet" href="../styles/main.css">
    <link rel="stylesheet" href="../styles/tutorial.css">
    <link rel="icon" type="image/svg+xml" href="../assets/logo-icon.svg">
</head>

<body>
    <header>
        <nav>
            <div class="nav-container">
                <div class="logo">
                    <a href="../index.html">
                        <img src="../assets/logo.svg" alt="Claude Code Club" class="logo-img">
                    </a>
                </div>
                <ul class="nav-links">
                    <li><a href="../index.html">é¦–é¡µ</a></li>
                    <li><a href="../tutorials/claude-basics.html">æ•™ç¨‹</a></li>
                    <li><a href="../examples/python-data-analysis.html">ç¤ºä¾‹</a></li>
                    <li><a href="../community.html">ç¤¾åŒº</a></li>
                    <li><a href="../about.html">å…³äº</a></li>
                </ul>
            </div>
        </nav>
    </header>

    <main class="tutorial-content">
        <div class="container">
            <article>
                <header class="tutorial-header">
                    <h1>Claude Code å®‰å…¨æœ€ä½³å®è·µ</h1>
                    <div class="tutorial-meta">
                        <span class="difficulty advanced">é«˜çº§</span>
                        <span class="duration">é˜…è¯»æ—¶é—´: 20åˆ†é’Ÿ</span>
                        <span class="category">å®‰å…¨</span>
                    </div>
                    <p class="tutorial-description">
                        å…¨é¢æŒæ¡Claude Codeå¼€å‘ä¸­çš„å®‰å…¨æœ€ä½³å®è·µï¼Œä¿æŠ¤ä½ çš„ä»£ç ã€æ•°æ®å’Œç³»ç»Ÿå®‰å…¨ã€‚
                    </p>
                </header>

                <div class="tutorial-body">
                    <section class="tutorial-section">
                        <h2>å®‰å…¨å¨èƒæ¦‚è§ˆ</h2>
                        <div class="security-threats">
                            <div class="threat-card high">
                                <h3>ğŸ”´ é«˜é£é™©å¨èƒ</h3>
                                <ul>
                                    <li>ä»£ç æ³¨å…¥æ”»å‡»</li>
                                    <li>æ•æ„Ÿä¿¡æ¯æ³„éœ²</li>
                                    <li>æƒé™æå‡æ”»å‡»</li>
                                </ul>
                            </div>
                            <div class="threat-card medium">
                                <h3>ğŸŸ¡ ä¸­é£é™©å¨èƒ</h3>
                                <ul>
                                    <li>ä¾èµ–åŒ…æ¼æ´</li>
                                    <li>é…ç½®é”™è¯¯</li>
                                    <li>æ—¥å¿—ä¿¡æ¯æ³„éœ²</li>
                                </ul>
                            </div>
                            <div class="threat-card low">
                                <h3>ğŸŸ¢ ä½é£é™©å¨èƒ</h3>
                                <ul>
                                    <li>ç‰ˆæœ¬ä¿¡æ¯æš´éœ²</li>
                                    <li>è°ƒè¯•ä¿¡æ¯æ®‹ç•™</li>
                                    <li>é”™è¯¯å¤„ç†ä¸å½“</li>
                                </ul>
                            </div>
                        </div>
                    </section>

                    <section class="tutorial-section">
                        <h2>è¾“å…¥éªŒè¯ä¸é˜²æŠ¤</h2>
                        <h3>SQLæ³¨å…¥é˜²æŠ¤</h3>
                        <div class="code-comparison">
                            <div class="before">
                                <h4>âŒ å±é™©çš„åšæ³•</h4>
                                <pre><code>// ç›´æ¥æ‹¼æ¥SQLï¼Œå­˜åœ¨æ³¨å…¥é£é™©
const query = `SELECT * FROM users WHERE id = ${userId}`;
const result = await db.query(query);</code></pre>
                            </div>
                            <div class="after">
                                <h4>âœ… å®‰å…¨çš„åšæ³•</h4>
                                <pre><code>// ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢
const query = 'SELECT * FROM users WHERE id = ?';
const result = await db.query(query, [userId]);

// æˆ–ä½¿ç”¨ORM
const user = await User.findById(userId);</code></pre>
                            </div>
                        </div>

                        <h3>XSSé˜²æŠ¤</h3>
                        <pre><code>// è¾“å…¥éªŒè¯å’Œè¾“å‡ºç¼–ç 
import { escape } from 'html-escaper';
import validator from 'validator';

function sanitizeInput(input) {
    // éªŒè¯è¾“å…¥æ ¼å¼
    if (!validator.isLength(input, { min: 1, max: 1000 })) {
        throw new Error('Invalid input length');
    }
    
    // HTMLç¼–ç 
    return escape(input);
}

// ä½¿ç”¨CSPå¤´éƒ¨
app.use((req, res, next) => {
    res.setHeader(
        'Content-Security-Policy',
        "default-src 'self'; script-src 'self' 'unsafe-inline'"
    );
    next();
});</code></pre>
                    </section>

                    <section class="tutorial-section">
                        <h2>æ•æ„Ÿä¿¡æ¯ä¿æŠ¤</h2>
                        <h3>ç¯å¢ƒå˜é‡ç®¡ç†</h3>
                        <pre><code># .env æ–‡ä»¶ç®¡ç†
DATABASE_URL=postgresql://user:password@localhost:5432/mydb
JWT_SECRET=your-super-secret-key
API_KEY=your-api-key

# .gitignore å¿…é¡»åŒ…å«
.env
.env.local
.env.production</code></pre>

                        <h3>å¯†é’¥è½®æ¢ç­–ç•¥</h3>
                        <pre><code>// å¯†é’¥ç®¡ç†æœåŠ¡
class KeyManager {
    constructor() {
        this.keys = new Map();
        this.rotationInterval = 24 * 60 * 60 * 1000; // 24å°æ—¶
    }
    
    async rotateKey(keyId) {
        const newKey = await this.generateSecureKey();
        const oldKey = this.keys.get(keyId);
        
        // ä¿ç•™æ—§å¯†é’¥ä¸€æ®µæ—¶é—´ä»¥æ”¯æŒæ­£åœ¨å¤„ç†çš„è¯·æ±‚
        this.keys.set(keyId, newKey);
        
        setTimeout(() => {
            this.keys.delete(`${keyId}_old`);
        }, this.rotationInterval);
        
        if (oldKey) {
            this.keys.set(`${keyId}_old`, oldKey);
        }
        
        return newKey;
    }
}</code></pre>
                    </section>

                    <section class="tutorial-section">
                        <h2>èº«ä»½è®¤è¯ä¸æˆæƒ</h2>
                        <h3>JWTå®‰å…¨å®ç°</h3>
                        <pre><code>// å®‰å…¨çš„JWTå®ç°
class AuthService {
    generateTokens(user) {
        const accessToken = jwt.sign(
            { userId: user.id, role: user.role },
            process.env.JWT_SECRET,
            { expiresIn: '15m' }
        );
        
        const refreshToken = jwt.sign(
            { userId: user.id, tokenVersion: user.tokenVersion },
            process.env.REFRESH_SECRET,
            { expiresIn: '7d' }
        );
        
        return { accessToken, refreshToken };
    }
    
    async validateToken(token) {
        try {
            const decoded = jwt.verify(token, process.env.JWT_SECRET);
            
            // æ£€æŸ¥ç”¨æˆ·æ˜¯å¦ä»ç„¶æœ‰æ•ˆ
            const user = await User.findById(decoded.userId);
            if (!user || !user.isActive) {
                throw new Error('User not found or inactive');
            }
            
            return decoded;
        } catch (error) {
            throw new Error('Invalid token');
        }
    }
}</code></pre>

                        <h3>æƒé™æ§åˆ¶ä¸­é—´ä»¶</h3>
                        <pre><code>// RBACæƒé™æ§åˆ¶
function requirePermission(permission) {
    return async (req, res, next) => {
        try {
            const user = req.user;
            const hasPermission = await checkUserPermission(user.id, permission);
            
            if (!hasPermission) {
                return res.status(403).json({ 
                    error: 'Insufficient permissions' 
                });
            }
            
            next();
        } catch (error) {
            res.status(401).json({ error: 'Authentication required' });
        }
    };
}

// ä½¿ç”¨ç¤ºä¾‹
app.delete('/api/users/:id', 
    authenticateToken,
    requirePermission('user:delete'),
    deleteUser
);</code></pre>
                    </section>

                    <section class="tutorial-section">
                        <h2>å®‰å…¨ç¼–ç è§„èŒƒ</h2>
                        <div class="security-checklist">
                            <h3>ä»£ç å®¡æŸ¥æ¸…å•</h3>
                            <div class="checklist-item">
                                <input type="checkbox" id="input-validation">
                                <label for="input-validation">æ‰€æœ‰ç”¨æˆ·è¾“å…¥éƒ½ç»è¿‡éªŒè¯å’Œæ¸…ç†</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" id="sql-injection">
                                <label for="sql-injection">ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢é˜²æ­¢SQLæ³¨å…¥</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" id="xss-protection">
                                <label for="xss-protection">è¾“å‡ºå†…å®¹ç»è¿‡é€‚å½“ç¼–ç é˜²æ­¢XSS</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" id="auth-check">
                                <label for="auth-check">æ‰€æœ‰æ•æ„Ÿæ“ä½œéƒ½éœ€è¦èº«ä»½éªŒè¯</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" id="error-handling">
                                <label for="error-handling">é”™è¯¯ä¿¡æ¯ä¸æ³„éœ²æ•æ„Ÿä¿¡æ¯</label>
                            </div>
                        </div>
                    </section>

                    <section class="tutorial-section">
                        <h2>å®‰å…¨æµ‹è¯•ä¸ç›‘æ§</h2>
                        <h3>è‡ªåŠ¨åŒ–å®‰å…¨æµ‹è¯•</h3>
                        <pre><code>// å®‰å…¨æµ‹è¯•ç”¨ä¾‹
describe('Security Tests', () => {
    describe('SQL Injection Protection', () => {
        it('should prevent SQL injection in user queries', async () => {
            const maliciousInput = "1'; DROP TABLE users; --";
            
            const response = await request(app)
                .get(`/api/users/${maliciousInput}`)
                .expect(400);
                
            expect(response.body.error).toContain('Invalid input');
        });
    });
    
    describe('XSS Protection', () => {
        it('should sanitize HTML in user content', async () => {
            const xssPayload = '<script>alert("xss")</script>';
            
            const response = await request(app)
                .post('/api/comments')
                .send({ content: xssPayload })
                .expect(201);
                
            expect(response.body.content).not.toContain('<script>');
        });
    });
});</code ></pre >

                        <h3>å®‰å…¨ç›‘æ§</h3>
                        <pre><code>// å®‰å…¨äº‹ä»¶ç›‘æ§
class SecurityMonitor {
    constructor() {
        this.suspiciousActivities = new Map();
        this.rateLimiter = new Map();
    }
    
    logSecurityEvent(event) {
        const { type, userId, ip, details } = event;
        
        // è®°å½•å®‰å…¨äº‹ä»¶
        console.log(`[SECURITY] ${type}: User ${userId} from ${ip}`, details);
        
        // æ£€æŸ¥æ˜¯å¦éœ€è¦è§¦å‘è­¦æŠ¥
        if (this.isSuspiciousActivity(event)) {
            this.triggerSecurityAlert(event);
        }
    }
    
    isSuspiciousActivity(event) {
        const key = `${event.userId}_${event.type}`;
        const count = this.suspiciousActivities.get(key) || 0;
        
        this.suspiciousActivities.set(key, count + 1);
        
        // å¦‚æœåŒä¸€ç”¨æˆ·åœ¨çŸ­æ—¶é—´å†…å¤šæ¬¡è§¦å‘å®‰å…¨äº‹ä»¶
        return count > 5;
    }
    
    triggerSecurityAlert(event) {
        // å‘é€è­¦æŠ¥é€šçŸ¥
        this.notificationService.sendAlert({
            type: 'SECURITY_BREACH',
            severity: 'HIGH',
            details: event
        });
        
        // å¯èƒ½éœ€è¦ä¸´æ—¶å°ç¦ç”¨æˆ·
        if (event.severity === 'CRITICAL') {
            this.userService.temporaryBan(event.userId);
        }
    }
}</code></pre>
                    </section>

                    <section class="tutorial-section">
                        <h2>éƒ¨ç½²å®‰å…¨é…ç½®</h2>
                        <h3>HTTPSé…ç½®</h3>
                        <pre><code># nginx SSLé…ç½®
server {
    listen 443 ssl http2;
    server_name yourdomain.com;
    
    ssl_certificate /path/to/certificate.crt;
    ssl_certificate_key /path/to/private.key;
    
    # å®‰å…¨å¤´éƒ¨
    add_header Strict-Transport-Security "max-age=31536000; includeSubDomains" always;
    add_header X-Frame-Options DENY always;
    add_header X-Content-Type-Options nosniff always;
    add_header Referrer-Policy strict-origin-when-cross-origin always;
    
    # éšè—æœåŠ¡å™¨ä¿¡æ¯
    server_tokens off;
}</code></pre>

                        <h3>Dockerå®‰å…¨é…ç½®</h3>
                        <pre><code># å®‰å…¨çš„Dockerfile
FROM node:18-alpine AS builder

# åˆ›å»ºérootç”¨æˆ·
RUN addgroup -g 1001 -S nodejs
RUN adduser -S nextjs -u 1001

# è®¾ç½®å·¥ä½œç›®å½•
WORKDIR /app

# å¤åˆ¶ä¾èµ–æ–‡ä»¶
COPY package*.json ./
RUN npm ci --only=production && npm cache clean --force

# å¤åˆ¶åº”ç”¨ä»£ç 
COPY . .
RUN chown -R nextjs:nodejs /app

# åˆ‡æ¢åˆ°érootç”¨æˆ·
USER nextjs

# æš´éœ²ç«¯å£
EXPOSE 3000

# å¯åŠ¨åº”ç”¨
CMD ["npm", "start"]</code></pre>
                    </section>

                    <section class="tutorial-section">
                        <h2>å®‰å…¨æœ€ä½³å®è·µæ€»ç»“</h2>
                        <div class="key-takeaways">
                            <h4>æ ¸å¿ƒå®‰å…¨åŸåˆ™ï¼š</h4>
                            <ul>
                                <li>âœ… æ°¸è¿œä¸è¦ä¿¡ä»»ç”¨æˆ·è¾“å…¥ï¼Œè¿›è¡Œä¸¥æ ¼éªŒè¯</li>
                                <li>âœ… ä½¿ç”¨æœ€å°æƒé™åŸåˆ™ï¼Œåªç»™å¿…è¦çš„æƒé™</li>
                                <li>âœ… å®šæœŸæ›´æ–°ä¾èµ–åŒ…ï¼Œä¿®å¤å·²çŸ¥æ¼æ´</li>
                                <li>âœ… å®æ–½æ·±åº¦é˜²å¾¡ï¼Œå¤šå±‚å®‰å…¨ä¿æŠ¤</li>
                                <li>âœ… è®°å½•å’Œç›‘æ§æ‰€æœ‰å®‰å…¨ç›¸å…³äº‹ä»¶</li>
                                <li>âœ… å®šæœŸè¿›è¡Œå®‰å…¨å®¡è®¡å’Œæ¸—é€æµ‹è¯•</li>
                            </ul>
                        </div>

                        <div class="alert alert-warning">
                            <strong>é‡è¦æé†’ï¼š</strong>å®‰å…¨æ˜¯ä¸€ä¸ªæŒç»­çš„è¿‡ç¨‹ï¼Œä¸æ˜¯ä¸€æ¬¡æ€§çš„ä»»åŠ¡ã€‚éœ€è¦å®šæœŸè¯„ä¼°å’Œæ›´æ–°å®‰å…¨æªæ–½ã€‚
                        </div>
                    </section>
                </div>

                <footer class="tutorial-footer">
                    <div class="tutorial-navigation">
                        <a href="claude-code-workflow.html" class="nav-link prev">
                            â† ä¸Šä¸€ç¯‡ï¼šClaude Codeå·¥ä½œæµä¼˜åŒ–
                        </a>
                        <a href="claude-code-performance.html" class="nav-link next">
                            ä¸‹ä¸€ç¯‡ï¼šClaude Codeæ€§èƒ½ä¼˜åŒ– â†’
                        </a>
                    </div>

                    <div class="tutorial-tags">
                        <span class="tag">å®‰å…¨</span>
                        <span class="tag">æœ€ä½³å®è·µ</span>
                        <span class="tag">é˜²æŠ¤</span>
                        <span class="tag">ç›‘æ§</span>
                    </div>
                </footer>
            </article>
        </div>
    </main>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <div class="footer-logo">
                        <img src="../assets/logo-simple.svg" alt="Claude Code Club" class="footer-logo-img">
                        <span>Claude Code Club</span>
                    </div>
                    <p>æ¢ç´¢AIç¼–ç¨‹çš„æ— é™å¯èƒ½</p>
                </div>

                <div class="footer-section">
                    <h4>å¿«é€Ÿé“¾æ¥</h4>
                    <ul>
                        <li><a href="../tutorials/claude-basics.html">åŸºç¡€æ•™ç¨‹</a></li>
                        <li><a href="../examples/python-data-analysis.html">ä»£ç ç¤ºä¾‹</a></li>
                        <li><a href="../community.html">åŠ å…¥ç¤¾åŒº</a></li>
                    </ul>
                </div>

                <div class="footer-section">
                    <h4>å‹æƒ…é“¾æ¥</h4>
                    <ul>
                        <li><a href="https://claude.ai" target="_blank">Claudeå®˜ç½‘</a></li>
                        <li><a href="https://github.com/anthropics" target="_blank">Anthropic GitHub</a></li>
                    </ul>
                </div>
            </div>

            <div class="footer-bottom">
                <p>&copy; 2024 Claude Code Club. ä¿ç•™æ‰€æœ‰æƒåˆ©ã€‚</p>
            </div>
        </div>
    </footer>

    <script src="../scripts/main.js"></script>
    <script src="../scripts/wechat-share.js"></script>
</body>

</html>